---
name: Dispatch to docs repo

on:
    push:
        branches:
            - main
        paths:
            - openhands-agent-server/**
    workflow_dispatch:
jobs:
    dispatch:
        runs-on: blacksmith-4vcpu-ubuntu-2404
        permissions:
            contents: write
        steps:
            - name: Trigger docs repo sync
              uses: peter-evans/repository-dispatch@v4
              with:
                  token: ${{ secrets.ALLHANDS_BOT_GITHUB_PAT }}
                  repository: OpenHands/docs
                  event-type: update
                  client-payload: '{"ref": "${{ github.ref }}", "sha": "${{ github.sha }}"}'
